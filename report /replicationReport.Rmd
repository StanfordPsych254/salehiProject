---
title: 'A Replication Study of a Gender Bias in the Attribution of Creativity: Archival and Experimental Evidence for the Perceived Association Between Masculinity and Creative Thinking, by Proudfoot et al'
author: "Shima Salehi (salehi@stanford.edu)"
date: "2015, Psychological Science"
output: 
  html_document:
    toc: true
---

Original experiment is [here](https://stanford.edu/~salehi/salehiProject/Experiment1/creativity.html).


#Introduction

The goal of this study was to examine whether in terms of creativity men and their works would be evaluated differently than women and their works. In other words, whether the judgement of creativity is influenced by the gender of a creator. To test this hypothesis, the authors asked participants to rate creativity of stereotypically masculine characteristics as well as stereotypically feminine characteristics. The researchers compared whether the attribution of creativity varied significantly across gendered characteristics. Furthermore, authors were interested to speculate that given there might be a gender bias for attribution of creativity, this bias could be moderated by how creativity is defined. They used two different definitions for creativity: 1. divergent thinking: thinking outside the box, 2. convergent thinking: bringing pieces together and connecting the dots. They decided on these two definitions, because these definition are aligned with agency and communality divide, which has been associated with masculinity and femininity divide. Therefore, authors pursued whether by defining creativity as a communal and more feminine trait versus. a more agentic and masculine trait, they can manipulate the potential gender bias in attribution of creativity.

#Methods

##Power Analysis 

The authors conducted a one-way ANOVA on the rating of masculine traits and they found a significant effect of condition on the ratings of masculine traits: 

> The masculine traits were perceived as more central to creativity when divergence was emphasized, rather than convergence, F(1, 78) = 10.21, p = .002, d = 0.71. 

Using the above information, I conducted a post-hoc power analysis based on cohen'd and sample size. At the significance level of 0.05, for a t.test with 79 degrees of freedom and the effect size of 0.71, the post-hoc power is 0.88.


#Planned Sample

To detect the Cohen's d effect size of 0.71 at the power of 0.8,66 participants are needed. However, it should be mentioned that this is the effect size of a sub-set of analyses and the effect size of the main mixed-model ANOVA might be below 0.71. Therefore, to assure that the replication study would not be underpowered, the replication will be conducted with 80 participants - the sample size used in the original study. Furthermore, for the potential necessarily exclusion of participants we include 5% margin as well,so the run sample size is going to be 84.

#Materials & Procedure
	
##Study1:

> Participants were randomly assigned to one of two conditions. Participants in the divergent-thinking condition read a passage describing creativity as the ability to “think outside the box,” see the world differently than the average person does, and create things that do not conform to traditions. Participants in the convergent-thinking condition read that creativity is the ability to “connect the dots,” see the connections between disparate ideas, and create things that bring ideas together in a unique way (see the Supplemental Material for the text used for this manipulation).
						
> Participants then rated, on a 9-point scale, how central 16 personality traits were to creativity, as described in the passage. Eight of the traits were stereotypically masculine-agentic (decisive, competitive, self-reliant, willing to take risks, ambitious, daring, adventurous, courageous), and 8 were stereotypically feminine-communal (sensi- tive, cooperative, understanding of others, helpful to others, sympathetic, nurturing, warm in relations with others, and supportive; cf. Prentice & Carranza, 2002). An exploratory factor analysis with varimax rotation revealed a two-factor structure. The 8 masculine-agentic traits loaded onto one factor, so ratings of these traits were combined (α = .88). The 8 feminine-communal traits loaded onto the other factor, so ratings of these traits were combined (α = .92).

#Analysis Plan

Same as the authors of the original paper, I am going to conduct 

> “a mixed-model ANOVA with condition as the between-subjects factor and trait type as the within-subjects factor” (confirmatory analysis 1). 

After that I will conduct two separate repeated measure ANOVA's for each of the creativity definition conditions to examine the effect size of the trait type within each condition (confirmatory analysis 2).This analyses is to examine whether within each condition participants perceived feminine and masculine trait type associated to creativity differently. 

Furthermore, I will conduct two one-way ANOVA's for each group of gendered characteristics to compare the average creativity score across conditions(confirmatory analysis 3). This analyses will examine whether for each trait type, changes in the definition of creativity would affect how participants find those traits associated to creativity.

In addition to these three confirmatory analyses, I will conduct some exploratory analyses. I will conduct mixed effect regression model analyses to include other theoretically meaningful variables - ethnicity, education, and gender of participants- in analyzing the participants' rating of traits. Same as the authors, we are collecting data on age, gender, education, ethnicity, political orientation and income.


#Differences from Original Study

There is no main planned difference from the original study. There are one minor differences: instead of showing all the traits on one single page, the traits will be shown sequentially one at the time.

#Actual Sample

> In the original study, eighty participants (49% female, U.S. residents) were recruited from Amazon Mechanical Turk. Demographic variables did not moderate the results. 


#Differences from pre-data collection methods plan
None.

#Pilot Samples
For pilot B, I have conducted the survey on the Mturk website, and collected data from 6 naive participants.  

For pilot A, I conducted the survey on the Mturk sandbox website, and collected data from 4 naive participants.


#Results

Data preparation
=================================

Turning .json files per participants to one collective data frame with the variables of interest: rating of different traits, condition, gender, age, education, ethnicity, political orientation and income.

#### Loading Libraries

```{r message=F, warning=F}
rm(list=ls())
library(tidyr, warn.conflicts = FALSE, quietly=TRUE)
library(dplyr, warn.conflicts = FALSE, quietly=TRUE)
library(ggplot2, warn.conflicts = FALSE, quietly=TRUE)
library(langcog, warn.conflicts = FALSE, quietly=TRUE) 
library(rjson, warn.conflicts = FALSE, quietly=TRUE)
library(tidyjson, warn.conflicts = FALSE, quietly=TRUE)
library(car, warn.conflicts = FALSE, quietly=TRUE)
library(effsize, warn.conflicts = FALSE, quietly=TRUE)
library(compute.es, warn.conflicts = FALSE, quietly=TRUE)
library(lme4, warn.conflicts = FALSE, quietly=TRUE)
library(lsr, warn.conflicts = FALSE, quietly=TRUE)
library(xlsx, warn.conflicts = FALSE, quietly=TRUE)
library(knitr, warn.conflicts = FALSE, quietly=TRUE)
library(png, warn.conflicts = FALSE, quietly=TRUE)
library(grid, warn.conflicts = FALSE, quietly=TRUE)
library(lmtest, warn.conflicts = FALSE, quietly=TRUE)
#functions for se and CI
sem <- function(x) {sd(x, na.rm=TRUE) / sqrt(length(x))}
ci95 <- function(x) {sem(x) * 1.96}
```


```{r message=F, warning=F}
#Reading the path
path <- "~/Documents/Mturk2/"
files <- dir(paste0(path,"production-results/"), 
             pattern = "*.json")
d.b <- data.frame()
```

####Transforming data from JSON format to dataframe

```{r message=F, warning=F}
#reading the json files and turning them into one data.frame
for (f in files) {
  jf <- paste0(path, "production-results/",f)
  jd <- fromJSON(paste(readLines(jf), collapse=""))
  id <- data.frame(workerid = jd$WorkerId, 
                   trial_number_block=       as.factor(jd$answers$data$trial_number_block),
                    rating = as.numeric(jd$answers$data$rating),
                    gender = jd$answers$data$gender,
                    age = jd$answers$data$age,
                    sentence = jd$answers$data$sentence,
                    definition = jd$answers$data$definition,
                    political = jd$answers$data$political,
                    condition = as.factor(jd$answers$data$condition),
                    homelang = jd$answers$data$homelang,
                    income = jd$answers$data$income,
                    education = jd$answers$data$education,
                    ethnicity = jd$answers$data$ethnicity,
                    aim=jd$answers$data$expt_aim)
  d.b <- bind_rows(d.b, id)
}
# Number of participants
length(unique(d.b$workerid))
```

####Categorizing Traits into "Masculine" and "Feminine"

To be able to test the effect of trait type (either masculine or feminine), in the following, a categorical variable of 'traitType' has been defined with two levels of 'Masculine' and 'Feminine'.

Furthermore, other variables have been reformatted properly for analyses.
```{r trait type variable}
#sanity check: copying the dataframe and applying the reformating in the copied version
d.b2 <- d.b

#reformating the data
d.b2 <- d.b2 %>%
#creating a bolean variable for traits: for masculine traits the variable is true otherwise it is false  
mutate(trait = sentence %in% c('Decisive', 'Competitive', 'Self-reliant',   'Willing to take risks' , 'Ambitious', 'Daring' ,
'Adventurous' , 'Courageous')) %>% 

#changing it to categorical variable  
mutate(traitType = factor(ifelse(trait == TRUE, "Masculine", "Feminine"), levels=c("Masculine","Feminine"))) %>%

#including the trait themselves 
mutate(trait=factor(sentence))  %>%  
#creating a categorical variable for condition 
mutate(condition = factor(condition,levels=c("Divergent","Convergent"))) %>% 
  
#creating a categorical variable for gender 
mutate(genderF = as.factor(gender)) %>%
  
#creating a linear continous variable for education
mutate(educationL = as.numeric(factor(education, levels=c("someMiddleSchool" ,
          "someHighSchool", "highSchoolDrad","someCollege","collegeGraduate","someGrad","Grad")))) %>%
  
#creating a categorical variable for education  
mutate(educationF = as.factor(education)) %>% 
  
#creating a categorical variable for age  
mutate(ageF = as.factor(age)) %>%
  
#creating a linear continous variable for age  
mutate(ageL = as.numeric(factor(age, levels=c("0-17","18-24", "25-34","35-44","45-64","&gt;65")))) %>%
  
#creating a categorical variable for aethnicity   
mutate(ethnicityF = as.factor(ethnicity)) %>%
  
#creating a linear continous variable for income   
mutate(incomeL = as.numeric(factor(income, levels=c("LessThan15000" , "15000-24999", "25000-34999","35000-49999","50000-74999","75000-99999","100000-149999","150000-199999","morethan200000")))) %>%
  
#creating a categorical variable for income   
mutate(incomeF = as.factor(income)) %>%
  
#creating a linear continous variable for political orientation    
mutate(politicalL = as.numeric(political)) %>%
  
#creating a categorical variable for political orientation    
mutate(politicalL = as.factor(political)) 
```

####Histogram of ratings across conditions and trait types

```{r message=F, warning=F}
#rating vs. condition and traits
qplot(rating, data = d.b2, binwidth= 1, fill= traitType, facets = traitType ~ condition, geom = "histogram") +  
scale_fill_manual(values=c("#FF6633", "#33CCCC")) +
xlim(c(1,10)) +
xlab("Condition") +
ylab("Rating") +
ggtitle("Rating Across Conditions & Trait Types") + 
theme(plot.title = element_text(lineheight=.8, face="bold"))
```

#### The rating distribution across conditions

```{r ratings of trattypes across condition}
  d.b2 %>%
  ggplot(., aes(x = condition, y = rating, col = traitType)) + 
  geom_jitter(width = 0.25, height = 0.5) +
  scale_colour_manual(values=c("#FF6633", "#33CCCC")) +
  xlab("Condition") +
  ylab("Rating") +
  ggtitle("Trait Rating Across Conditions") + 
  theme(plot.title = element_text(lineheight=.8, face="bold"))
```

This plot suggests that compared to the convergent condition, for the divergent condition masculine traits have been rated on average higher and feminine traits on average lower.

#### Grouping and summarizing ratings across conditions and trait types

In the following, the mean and standard error or rating has been calculated across condition and trait types.

```{r summarizing the data}
#including trait type and condition in grouping
ms1 <- d.b2 %>%
  group_by(condition, traitType) %>%
  summarize(mean = mean(rating), ci95 =ci95(rating))

#ms1$condition <- factor(ms1$condition, c("Divergent", "Convergent"))
#ms1$traitType <- factor(ms1$traitType, c("Masculine", "Feminine"))
```

In the following, the graph of this data as well as the original graph of the paper has been reported.

#### Plot of average ratings


```{r ggplot condition}
  ms1 %>% ggplot(., aes(x = condition,y = mean,fill = traitType)) +  
  geom_bar(position = 'dodge',stat ='identity', width = 0.5) + 
  geom_errorbar(aes(ymin = mean-ci95, ymax = mean+ci95),
                  width = .2,                    # Width of the error bars
                  position = position_dodge(0.5)) + 
                  scale_fill_manual(values=c("#FF6633", "#33CCCC")) +
  ylab("Average Rating") + 
  xlab("Condition") +
  ggtitle("Average Trait Rating Across Conditions") + 
  theme(plot.title = element_text(lineheight=.8, face="bold"),legend.title = element_text(colour="Trait Type", size=16, face="bold")) +
  theme_bw() 
```

#### The similar plot from the original paper
This is the graph of the corresponding data published in the original study.

```{r the original graph}
img <- readPNG("~/Documents/Git/salehiProject/report /originalGraph.png")
grid.raster(img)
```



Data Analyses
=================================

##I. Confirmatory analysis

### Confirmatory analysis 1: Mixed-moded analysis between conditions

In the following, the means and 95% confidence intervals for ratings of different trait types across the two conditions have been reported. There is a more pronounced difference between the two rating types in the divergent condition; masculine traits have been rated almost twice more central to creativity than feminine traits. For the convergent condition, there is not much difference between the ratings of two trait types and they both have been rated higher than feminine traits in the divergent condition and lower than the masculine condition in the divergent condition.

#### Descriptive statistics: means and ci's across conditions & trait types

```{r mean and 95 ci of ratings across trait types and conditions}
ms1
```

For the original study, the authors have conducted a mixed-mode ANOVA with condition as a between-subject factor and trait type as a within-subject factor. This analysis examines whether different traits are perceived to have different centrality to creativity and whether the condition could affect this pattern.

```{r mixed model Anova: Main analyses}
# Mixed mode ANOVA with one between-subject factor of condition and one within-subject factor of trait type 
# One Within Factors W1, One Between Factors B1  
# fit <- aov(y~(W1*B1)+Error(Subject/(W1))+(B1),
fitConTrait <- aov(rating~(traitType*condition)+Error(workerid/(traitType))+(condition),data=d.b2)
summary(fitConTrait)
# effect size
#calculated eta.suared for trait= 58.59/(58.59+34.17+10.86)=0.56
#calculated eta.suared for trait=34.17/(58.59+34.17+10.86)=0.33
```

Besides the above mixed-model ANOVA, to confirm the findings, the authors have conducted two sets of follow-up tests: first, two repeated-measure ANOVA's within each condition to test the difference of rating for each trait type within each condition; and second, two one-way ANOVA's for each trait type across conditions to test the effect of condition on the rating of a particular trait type (i.e masculine or feminine). These follow-up tests have been repeated in the following.

### Confirmatory analysis 2: Repeated measure anova for each condition

The authors have conducted a repeated measure ANOVA to compare the rating for masculine versus feminine traits within the divergent condition. We have repeated the same analysis in the following:

#### Confirmatory analysis 2.1:Different trait types rating within the divergent condition

```{r Confirmatory analysis 2.1: trait type rating within the divergent condition }
#filtering divergent condition data points
divergent <- d.b2 %>% filter(condition == 'Divergent') 
#effect of trait types in Divergent condition: Within-subject anova
# One Within Factor: fit <- aov(y~A+Error(Subject/A),data=mydataframe)
fitDivergent <- aov(rating ~ traitType + Error(workerid/traitType), data=divergent)
summary(fitDivergent)

#effect size
divergentMasculine <- divergent %>% filter(traitType == 'Masculine')
divergentFeminine <- divergent %>% filter(traitType == 'Feminine')
cohen.d(divergentMasculine$rating,divergentFeminine$rating)
```

Same as the divergent condition, for the convergent condition, the authors have conducted a repeated measure ANOVA to compare the rating for masculine versus feminine traits. This analysis for the replicated data has been reported in the following:

#### Confirmatory analysis 2.2: Different trait types rating within the convergent condition

```{r Confirmatory analysis 2.2:trait type rating within the convergent condition}
#filtering convergent condition data points
convergent <- d.b2 %>% filter(condition == 'Convergent') 
#effect of trait types in Divergent condition: Within-subject anova
# One Within Factor: fit <- aov(y~A+Error(Subject/A),data=mydataframe)
fitConvergent <- aov(rating ~ traitType + Error(workerid/traitType), data=convergent)
summary(fitConvergent)

#effect size
convergentMasculine <- convergent %>% filter(traitType == 'Masculine')
convergentFeminine <- convergent %>% filter(traitType == 'Feminine')
cohen.d(convergentMasculine$rating,convergentFeminine $rating)
```

### Confirmatory analysis 3: One-way anova for each trait type 

Besides looking at the variations of trait types' rating within each condition, the authors have examined the effect of condition on rating of each trait type.To do so they have run two one-way ANOVA's for each trait type to check the effect of condition on the rating of a trait type.

To test whether the changes in the definition of creativity affect how central participants perceive masculine traits to the creativity, they have conducted one-way ANOVA on masculine traits over condition. The same analyses for the replicated data has been reported in the following.


## Replication key test
#### Confirmatory analysis 3.1: The masculine trait type rating across conditions


```{r Confirmatory analysis 3.1: The masculine trait type rating across conditions}
#filtering masculine traits data points
masculine <- d.b2 %>% filter(traitType == 'Masculine')
fitMasculine2 <- aov(rating ~ condition, data = masculine)
summary(fitMasculine2)

#effect size
cohen.d(divergentMasculine$rating, convergentMasculine$rating)
```

The authors checked if the changes in the creativity definition influence how central participants perceive feminine traits to creativity. to do so, Same as for masculine trait type, the authors conducted one-way ANOVA of feminine trait type rating over condition. This analysis for the replicated data have been reported here:

#### Confirmatory analysis 3.2: The feminine trait type rating across conditions

```{r Confirmatory analysis 3.2: The mfeminine trait type rating across conditions}
#Filtering feminine traits data points
feminine <- d.b2 %>% filter(traitType == 'Feminine')
fitFeminine <- aov(rating ~ condition, data = feminine)
summary(fitFeminine)

# effect size
cohen.d(divergentFeminine$rating, convergentFeminine$rating)
```


##II. Exploratory analyses: mixed-model regression


### Exploratory analyses 1: Repeating mixed-model anova analysis using mixed-effect regression


In the following the mixed-model ANOVA analysis has been repeated using a mixed-effect regression model. To do so, I include a random intercept for each subject as well as a random effect of trait type as each subject rated both the trait types:

```{r lmer basic}
#random intercept for each traits
model1.1 <- lmer(rating ~ traitType * condition + (1 | trait), data=d.b2)
#printing out the table of fixed-effect results
kable(summary(model1.1)$coef)


#random intercept & slope for each traits
model1.2 <- lmer(rating ~ traitType * condition + (1 + condition| trait), data=d.b2)
#printing out the table of fixed-effect results
kable(summary(model1.2)$coef)

#comparing the fit of the models
lrtest(model1.1 , model1.2)

#random intercept & slope for each trait + random intercept for each subject
model1.3 <- lmer(rating ~ traitType * condition + (1 + condition | trait) +  (1 | workerid), data=d.b2)
#printing out the table of fixed-effect results
kable(summary(model1.3)$coef)

#comparing the fit of the models
lrtest(model1.2 , model1.3)

#random intercept & slope for each trait + random intercept for each subject
model1.4 <- lmer(rating ~ traitType * condition + (1 + condition | trait) +  (1 +traitType | workerid), data=d.b2)
#printing out the table of fixed-effect results
kable(summary(model1.4)$coef)

#comparing the fit of the models
lrtest(model1.3 , model1.4)
```

I would compare the fit of the above models if they converge and select the one with the best fit of the data. After selecting that best base model, the otehr IV's of interest will be added to that model. For now, before knowing the results of these model comparising, the model with random slope and intercept for trait will be used as a place holder. 


I would also like to include eduction, ethnicity, and gender of participants in my analyses to control for their potential effects on how participants evaluate the centrality of a trait to creativity. It might be the case that the definition of creativity is gendered to different extent for female and male participants. Also, level of education might influence how participants perceive creativity. Furthermore, different ethnicity with different cultures might have different definition for creativity. It might not be surprising that participants with collectivist cultures see creativity more aligned with communal i.e feminine traits.

### Exploratory analyses 2: Gender effect 

```{r Exploratory analyses 2: Gender effect}
#model with trait type and condition + gender
model2.1 <- lmer(rating ~ traitType * condition + gender + (1 +condition | trait), data=d.b2)
#printing out the table of fixed-effect results
kable(summary(model2.1)$coef)

#model with trait type and condition * gender
model2.2 <- lmer(rating ~ traitType * condition * gender + (1 +condition | trait), data=d.b2)
kable(summary(model2.2)$coef)

#comparing the fit of the models
lrtest(model2.1 , model2.2)
```

### Exploratory analyses 3: Gender & education effects

```{r Exploratory analyses 3: Gender & education effects}
#model with trait type and condition  + education
model3 <- lmer(rating ~ traitType * condition + educationL + (1 +condition | trait), data=d.b2)
#printing out the table of fixed-effect results
kable(summary(model3)$coef)
```

### Exploratory analyses 4: Gender, education & ethnicity effects

```{r Exploratory analyses 3: Gender, education & ethnicity effects}
#model with trait type and condition +  ethnicity
model4 <- lmer(rating~ traitType * condition + ethnicityF + (1 +condition | trait), data=d.b2)
#printing out the table of fixed-effect results
kable(summary(model4)$coef)
```

#Discussion

##I. Summary of Replication Attempt

##II. Commentary


#Contacting the authors

I have contacted the authors asking for the exclusion policy as well as their materials for the first study. Shortly, the authors replied in regard of exclusion policy and generously provided the survey of the first study on the Qualtrics platform. In the original study, no participants were excluded.
